{% extends 'base.html.twig' %}

{% block title %}
    Clipping Detail: {{ clipping.originalName }}
{% endblock %}

{% block pageheader %}
    <h1>{{ clipping.number }} (Vol. {{ clipping.source.id }})</h1>
{% endblock %}

{% block admin %}
    {% if is_granted('ROLE_CONTENT_ADMIN') %}
        <div class="btn-toolbar pull-right">
            <div class="btn-group">
                <a href="{{ path('clipping_edit', { 'id': clipping.id }) }}"
                    class="btn btn-default">
                    <span class='glyphicon glyphicon-edit'></span> Edit Item </a>
                <a href="{{ path('clipping_delete', { 'id': clipping.id }) }}" class="btn btn-default" 
                    data-confirm="Are you sure you want to delete this Clipping?">
                <span class='glyphicon glyphicon-remove'></span> Delete Item </a>
        
            </div>
        </div>
    {% endif %}
{% endblock %}

{% block body %}
    <article class="clipping">
        {% if clipping.transcription is not empty  %}
            <section class="transcription">
                <h3 class="sr-only">Transcription</h3>
                <div class="transcription-content">
                    {{ clipping.transcription|raw }}
                </div>
            </section>
        {% endif %}
        
        <section class="metadata{% if clipping.transcription is empty %} no-transcription{% endif %}">
            <div class="metadata-content">
                <a class="zoomable imgContainer" href="{{ asset(clipping_img_prefix ~ clipping.imageFilePath) }}">
                    <img 
                        src="{{ asset(clipping_img_prefix ~ clipping.thumbnailPath) }}" 
                        alt="{{ clipping.originalName }}" title="{{ clipping.originalName }}"/> 
                </a>
                <div class="metadata-body">
                   <div>
                       <h4>Clipping Number</h4>
                       <div>{{ clipping.number }}</div>
                   </div>
                    <div>
                        <h4>Written Date:</h4>
                        
                        
                        {% if clipping.writtenDate matches '([nN]\.?[dD]|No [dD]ate\.?)' %}
                            <div class="unset">Not dated</div>
                        {% else %}
                            <div>{{ clipping.writtenDate }}</div>
                        {% endif %}
                    </div>
                    <div>
                        <h4>Date:</h4>
                        {% if clipping.date is null %}
                            <div class="unset">Not dated</div>
                        {% else %}
                        <div>{{ clipping.date }}</div>
                        {% endif %}
                    </div>
       
                    <div>
                        <h4>Category:</h4>
                        <div>
                            <a href="{{ path('category_show', { 'id': clipping.category.id}) }}">
                                {{ clipping.category }}
                            </a>
                        </div>
                    </div>
                    <div>
                        <h4>Source:</h4>
                        <div>
                            <a href="{{ path('source_show', { 'id': clipping.source.id}) }}">
                                {{ clipping.source }}
                            </a>
                        </div>
                    </div>
                    {% if is_granted('ROLE_CONTENT_ADMIN') %}
                    <div>
                        <h4>Image Number:</h4>
                        <div><a href="{{ asset(clipping_img_prefix ~ clipping.imageFilePath) }}" target="_blank">{{ clipping.originalName }}</a></div>
                    </div>
                    <div>
                        <h4>Created:</h4>
                        <div>{% if clipping.created %}{{ clipping.created|date('Y-m-d H:i:s') }}{% endif %}</div>
                    </div>
                    <div>
                        <h4>Updated:</h4>
                        <div>{% if clipping.updated %}{{ clipping.updated|date('Y-m-d H:i:s') }}{% endif %}</div>
                    </div>
                    {% endif %}
                </div>
            
            </div>
        </section>
    </article>
    <div id="facsViewerContainer">
            <span id="facs_closer" class="facsCloser">&times;</span>
            
            <div id="facs_loader">
                <div class="loader">Loading</div>
            </div>
            <canvas id="viewer"/>
        
        
    </div>        
{% endblock %}

{% block javascripts %}
<script src="{{ asset('js/imagezoom.js') }}"></script>
{% endblock %}
